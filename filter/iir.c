/****************************************************** COMECA *******************************************************
 *  \author		tedie.cedric
 *  \date		6 avr. 2018
 *  \addtogroup	TODO
 *  \{
 ********************************************************************************************************************/
/*********************************************************************************************************************
 *  \file		iir.c
 *  
 *  \brief		TODO
 *
 *  \details	
 *
 ********************************************************************************************************************/

/* Includes --------------------------------------------------------------------------------------------------------*/
#include <stdint.h>
#include <stdbool.h>
#include "iir.h"

/* Macro definition ------------------------------------------------------------------------------------------------*/
/* Constant definition ---------------------------------------------------------------------------------------------*/
/* Type definition  ------------------------------------------------------------------------------------------------*/
/* Public variables ------------------------------------------------------------------------------------------------*/
/* Private variables -----------------------------------------------------------------------------------------------*/
/* Private functions prototypes ------------------------------------------------------------------------------------*/
/* Private functions -----------------------------------------------------------------------------------------------*/
/* Public functions ------------------------------------------------------------------------------------------------*/

/**********************************************************
 * \brief 
 *
 * \param [in]  
 * \param [out]  
 *
 * \return
 *********************************************************/
bool IIR_Init(iir_filter_t *pFilter)
{
    pFilter->_z1 = 0;
    pFilter->_z2 = 0;
    pFilter->out = 0;

    return true;
}

/**********************************************************
 * \brief
 *
 * \param [in]
 * \param [out]
 *
 * \return
 *********************************************************/
void IIR_Run(iir_filter_t *pFilter)
{
    pFilter->out = *(pFilter->pInput) * pFilter->_a0 + pFilter->_z1;

    pFilter->_z1 = *(pFilter->pInput) * pFilter->_a1 + pFilter->_z2 - pFilter->_b1 * pFilter->out;
    pFilter->_z2 = *(pFilter->pInput) * pFilter->_a2 - pFilter->_b2 * pFilter->out;
}


/** \} */
/******************************************************** EOF *******************************************************/
